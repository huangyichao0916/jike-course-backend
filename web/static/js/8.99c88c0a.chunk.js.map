{"version":3,"sources":["API/debounce.ts","components/course/lesson/studyPath/studyPathItem/index.tsx","components/course/lesson/studyPath/index.tsx","components/course/lesson/courseDirectionItem/index.tsx","pages/course/lesson/courseDirection/index.tsx","components/course/lesson/allCoursesItem/index.tsx","pages/course/lesson/allCourses/index.tsx","baseUI/MyBScroll/index.tsx","pages/course/lesson/index.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","baseUI/myButton/index.tsx"],"names":["debounce","func","delay","timer","args","clearTimeout","setTimeout","apply","StudyPathItem","this","props","name","icon","product_count","className","src","alt","PureComponent","StudyPath","state","data","axios","get","then","res","setState","finalStudyPathItem","map","i","index","id","key","CourseDirectionItem","title","myClassname","React","memo","items","useMemo","myItems","item","isEvenNumber","classnames","courseDirectionItem","evenNumberItem","AllCoursesItem","authorName","authorDesc","avatar","articleCount","totalPeopleLearn","priceMarket","priceSale","haveLearned","handleBuyLesson","myButton","clickable","myOnClick","connect","dispatch","price","payload","lessonBuyLessonActionCreator","courseLessonDataSource","ScrollContainer","styled","div","Scroll","useState","bScroll","setBScroll","scrollContaninerRef","useRef","direction","click","refresh","bounceTop","bounceBottom","pullUp","console","log","pullDown","onScroll","pullUpDebounce","pullDownDebounce","useEffect","scroll","BScroll","current","scrollX","scrollY","probeType","bounce","top","bottom","on","off","handlePullUp","y","maxScrollY","handlePullDown","pos","ref","children","getIn","toJS","addDataToCourseLesson","addDataToCourseLessonActionCreator","refreshCourseLesson","refreshCourseLessonActionCreator","Len","length","offset","setOffset","loadCourseLesson","useCallback","Error","catch","err","reloadCourseLesson","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","unsupportedIterableToArray","TypeError","MyButton","parentNode","style","position","finalClassName","finalOnClick","call","onClick"],"mappings":"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","file":"static/js/8.99c88c0a.chunk.js","sourcesContent":["const debounce: Function = (func: Function, delay: number): Function => {\n    let timer: any = null;\n    return function (...args: any[]) {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = setTimeout(() => {\n            func.apply(this, args);\n            clearTimeout(timer);\n        }, delay);\n    };\n};\n\nexport default debounce;","import React, { PureComponent } from 'react';\nimport './studyPathItem.styl';\n\ninterface Props {\n    name: string;\n    icon: string;\n    product_count: number;\n}\nclass StudyPathItem extends PureComponent<Props> {\n    render() {\n        const { name, icon, product_count } = this.props;\n        return (\n            <div className=\"studyPathItem\">\n                <div className=\"description\">\n                    <div className=\"type\">\n                        {name}\n                    </div>\n                    <div className=\"totalLessons\">\n                        共有{product_count}门课程\n                    </div>\n                </div>\n                <div className=\"img\">\n                    <img src={icon} alt=\"\" />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StudyPathItem;","import React, { PureComponent } from 'react';\nimport './studyPath.styl';\nimport StudyPathItem from './studyPathItem';\nimport axios from 'axios';\n\ninterface Item {\n    id: number;\n    name: string;\n    icon: string;\n    product_count: number;\n    [otherProps: string]: any;\n}\ninterface State {\n    data: Item[];\n}\nclass StudyPath extends PureComponent<any, State> {\n    state = {\n        data: [],\n    };\n    componentDidMount() {\n        axios.get<Item[]>('/data/studyPath.json').then((res) =>\n            this.setState({\n                data: res.data,\n            })\n        );\n    }\n    render() {\n        const { data } = this.state;\n        const finalStudyPathItem: Array<JSX.Element> = data.map(\n            (i: Item, index: number) => {\n                const { id, name, icon, product_count } = i;\n                return (\n                    <StudyPathItem\n                        key={id}\n                        name={name}\n                        product_count={product_count}\n                        icon={icon}\n                    />\n                );\n            }\n        );\n        return (\n            <div className=\"studyPath\">\n                <div className=\"top\">\n                    <div className=\"left\">学习路径</div>\n                    <div className=\"right\">查看全部</div>\n                </div>\n                <div className=\"studyPathItemWrapper\">\n                    <div className=\"content\">{finalStudyPathItem}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StudyPath;\n","import React,{FC} from 'react';\nimport './courseDirectionItem.styl';\n\ninterface Props{\n    title:string;\n    myClassname:string;\n}\nconst CourseDirectionItem:FC<Props> = props => {\n    const {title,myClassname} = props;\n    return (\n        <div className={myClassname}>\n            {title}\n        </div>\n    )\n}\n\nexport default CourseDirectionItem;","import React, { useMemo, FC } from 'react';\nimport './courseDirection.styl';\nimport CourseDirectionItem from '@/components/course/lesson/courseDirectionItem';\nimport classnames from 'classnames';\n\nconst CourseDirection: FC<any> = () => {\n    const items: Array<string> = useMemo(\n        () => [\n            '计算机专业课',\n            '后端&架构',\n            '前端&移动',\n            '产品&运营',\n            '人工智能&大数据',\n            '运维&测试',\n            '管理&效率',\n            '职场软技能',\n            '面试专场',\n        ],\n        []\n    );\n    // console.log(items);\n    const myItems: Array<JSX.Element> = useMemo(\n        () =>\n            items.map((item: string, index: number) => {\n                let isEvenNumber = index % 2 === 0 ? false : true;\n                return (\n                    <CourseDirectionItem\n                        key={index}\n                        title={item}\n                        myClassname={classnames({\n                            courseDirectionItem: true,\n                            evenNumberItem: isEvenNumber,\n                        })}\n                    />\n                );\n            }),\n        []\n    );\n    return (\n        <div className=\"courseDirection\">\n            <div className=\"courseDirectionTop\">\n                <div className=\"left\">课程方向</div>\n                <div className=\"right\">查看全部</div>\n            </div>\n            <div className=\"courseDirectionItemWrapper\">{myItems}</div>\n        </div>\n    );\n};\n\nexport default React.memo(CourseDirection);\n","import React, { FC } from 'react';\nimport './allCoursesItem.styl';\nimport MyButton from '@/baseUI/myButton';\nimport LazyLoad from 'react-lazyload';\n\nimport { StudyItemInt, CourseLessonItem } from '@/store/types';\n\ninterface Props extends CourseLessonItem {\n    index: number;\n    handleBuyLesson: (\n        price: number,\n        index: number,\n        payload: StudyItemInt\n    ) => void;\n}\nconst AllCoursesItem: FC<Props> = (props) => {\n    const {\n        title,\n        authorName,\n        authorDesc,\n        avatar,\n        articleCount,\n        totalPeopleLearn,\n        priceMarket,\n        priceSale,\n        haveLearned,\n\n        index,\n        handleBuyLesson,\n    } = props;\n\n    let myButton: JSX.Element = haveLearned ? (\n        <MyButton clickable={false}>已购买</MyButton>\n    ) : (\n        <MyButton\n            myOnClick={() => {\n                handleBuyLesson(priceSale, index, {\n                    title,\n                    authorName,\n                    authorDesc,\n                });\n            }}\n            clickable={true}\n        >\n            购买\n        </MyButton>\n    );\n\n    return (\n        <div className=\"practiceCamp-item2\">\n            {myButton}\n            <div className=\"practiceCamp-item-img\">\n                <img src={avatar} alt=\"图片不见了\" />\n            </div>\n            <div className=\"practiceCamp-item-detail\">\n                <div className=\"practiceCamp-item-name\">{title}</div>\n                <div className=\"practiceCamp-item-teacher\">\n                    <div className=\"practiceCamp-item-teacher-name\">\n                        {authorName}\n                    </div>\n                    <div className=\"practiceCamp-item-teacher-desc\">\n                        {authorDesc}\n                    </div>\n                </div>\n                <div className=\"practiceCamp-item-time\">\n                    {articleCount}讲｜{totalPeopleLearn}人已学习\n                </div>\n                <div className=\"price-and-join\">\n                    <div className=\"practiceCamp-new-first-indent\">\n                        新人首单\n                    </div>\n                    <div className=\"practiceCamp-item-price\">￥{priceSale}</div>\n                    <div className=\"practiceCamp-item-oldprice\">\n                        ￥{priceMarket}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default AllCoursesItem;\n","import React, { FC } from 'react';\nimport './allCourses.styl';\nimport AllCoursesItem from '@/components/course/lesson/allCoursesItem';\n\nimport { \n    CourseLessonItem,\n    RootState,\n    StudyItemInt,\n } from '@/store/types'\nimport { lessonBuyLessonActionCreator, ActionType } from '@/store/action'\n\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk';\n\ninterface Props {\n    courseLessonDataSource: Array<CourseLessonItem>\n    handleBuyLesson: (price: number, index: number, payload: StudyItemInt) => void;\n}\nconst AllCourses: FC<Props> = props => {\n    const { courseLessonDataSource, handleBuyLesson } = props;\n    const items: Array<JSX.Element> = courseLessonDataSource.map((item: CourseLessonItem, index: number) => {\n        return (\n            <AllCoursesItem\n                {...item}\n\n                index={index}\n                key={item.id}\n                handleBuyLesson={handleBuyLesson}\n            />\n        )\n    })\n    return (\n        <div className=\"allCourses\">\n            <div className=\"allCoursesTop\">\n                全部课程\n            </div>\n            <div className=\"allCoursesNavBar\">\n                <div className=\"left\">\n                    课程形式\n                </div>\n                <div className=\"middle\">\n                    订阅状态\n                </div>\n                <div className=\"right\">\n                    上新\n                </div>\n            </div>\n            <div className=\"allCoursesItemWrapper\">\n                {\n                    items\n                }\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n\n    }\n}\nconst mapDispatchToProps = (dispatch: ThunkDispatch<RootState, any, ActionType>) => {\n    return {\n        handleBuyLesson: (price: number, index: number, payload: StudyItemInt) => {\n            dispatch(lessonBuyLessonActionCreator(price, index, payload));\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllCourses);","import React, { useState, useEffect, useRef, useMemo, FC } from 'react';\nimport BScroll from 'better-scroll';\nimport styled from 'styled-components';\nimport debounce from '@/API/debounce';\n\n// const LoadingComp:FC<any> = (props) => {\n//   return (\n//     <div className=\"loading-component\">\n//       loading\n//     </div>\n//   )\n// }\n\nconst ScrollContainer = styled.div`\n    width: 100%;\n    height: 60vh;\n`;\n\ninterface Pos {\n    x: number;\n    y: number;\n}\n\ninterface Props {\n    direction?: 'vertical' | 'horizental';\n    click?: boolean;\n    refresh?: boolean;\n    bounceTop?: boolean;\n    bounceBottom?: boolean;\n\n    onScroll?: (...args: any[]) => void;\n    pullUp?: (...args: any[]) => void;\n    pullDown?: (...args: any[]) => void;\n}\nconst Scroll: FC<Props> = (props) => {\n    const [bScroll, setBScroll] = useState<BScroll | null>(null);\n\n    const scrollContaninerRef = useRef();\n\n    const {\n        direction = 'vertical',\n        click = true,\n        refresh = true,\n        bounceTop = true,\n        bounceBottom = true,\n    } = props;\n\n    const {\n        pullUp = () => {\n            console.log('拉到了底部');\n        },\n        pullDown = () => {\n            console.log('拉到了顶部');\n        },\n        onScroll,\n    } = props;\n\n    let pullUpDebounce: Function = useMemo(() => {\n        return debounce(pullUp, 500);\n    }, [pullUp]);\n\n    let pullDownDebounce: Function = useMemo(() => {\n        return debounce(pullDown, 500);\n    }, [pullDown]);\n\n    useEffect(() => {\n        const scroll: BScroll = new BScroll(scrollContaninerRef.current, {\n            scrollX: direction === 'horizental',\n            scrollY: direction === 'vertical',\n            probeType: 3,\n            click: click,\n            bounce: {\n                top: bounceTop,\n                bottom: bounceBottom,\n            },\n        });\n\n        setBScroll(scroll);\n        return () => {\n            setBScroll(null);\n        };\n    }, []);\n\n    useEffect(() => {\n        //在滚动的时候触发事件\n        if (!bScroll || !onScroll) return;\n\n        bScroll.on('scroll', onScroll);\n        return () => {\n            bScroll.off('scroll', onScroll);\n        };\n    }, [onScroll, bScroll]);\n\n    useEffect(() => {\n        //判断是否滑动到了底部\n        if (!bScroll || !pullUp) return;\n        const handlePullUp = () => {\n            if (bScroll.y <= bScroll.maxScrollY + 100) {\n                pullUpDebounce();\n            }\n        };\n        bScroll.on('touchEnd', handlePullUp);\n        return () => {\n            bScroll.off('touchEnd', handlePullUp);\n        };\n    }, [pullUp, pullUpDebounce, bScroll]);\n\n    useEffect(() => {\n        //判断用户的下拉动作\n        if (!bScroll || !pullDown) return;\n        const handlePullDown = (pos: Pos) => {\n            if (pos.y > 50) {\n                pullDownDebounce();\n            }\n        };\n        bScroll.on('touchEnd', handlePullDown);\n        return () => {\n            bScroll.off('touchEnd', handlePullDown);\n        };\n    }, [pullDown, pullDownDebounce, bScroll]);\n\n    useEffect(() => {\n        if (refresh && bScroll) {\n            bScroll.refresh();\n        }\n    });\n\n    return (\n        <ScrollContainer ref={scrollContaninerRef}>\n            {props.children}\n        </ScrollContainer>\n    );\n};\n\nexport default Scroll;\n","import React, { useEffect, FC, useCallback, Dispatch, useState } from 'react';\nimport './lesson.styl';\nimport axios from 'axios';\nimport '@/mock/course-lesson-data';\n\nimport StudyPath from '@/components/course/lesson/studyPath';\nimport CourseDirection from './courseDirection';\nimport AllCourses from './allCourses';\nimport BScroll from '@/baseUI/MyBScroll';\n\nimport {\n    addDataToCourseLessonActionCreator,\n    refreshCourseLessonActionCreator,\n    AddDataToCourseLessonAction,\n    RefreshCourseLessonAction,\n} from '@/store/action';\nimport { CourseLessonItem } from '@/store/types';\n\nimport { connect } from 'react-redux';\n\ninterface Props {\n    addDataToCourseLesson: (...args: any[]) => any;\n    refreshCourseLesson: (...args: any[]) => any;\n    courseLessonDataSource: Array<CourseLessonItem>;\n}\n\nconst Lesson: FC<Props> = (props) => {\n    const {\n        courseLessonDataSource,\n        addDataToCourseLesson,\n        refreshCourseLesson,\n    } = props;\n    const Len: number = courseLessonDataSource.length;\n    const [offset, setOffset] = useState<number>(0);\n    // console.log('offset='+offset)\n\n    const loadCourseLesson = useCallback((offset: number) => {\n        axios\n            .get(`/mock/course/lesson?offset=${offset}`)\n            .then((res) => {\n                if (res.data) {\n                    setOffset(res.data.offset);\n                    addDataToCourseLesson(res.data.data);\n                    console.log('load success');\n                } else {\n                    throw new Error('所有数据都展示完毕，无数据');\n                }\n            })\n            .catch((err) => console.log(err));\n    }, []);\n    const reloadCourseLesson = useCallback((offset: number) => {\n        axios\n            .get(`/mock/course/lesson?offset=${offset}`)\n            .then((res) => {\n                if (res.data) {\n                    setOffset(res.data.offset);\n                    refreshCourseLesson(res.data.data);\n                    console.log('refresh success');\n                } else {\n                    throw new Error('所有数据都展示完毕，无数据');\n                }\n            })\n            .catch((err) => console.log(err));\n    }, []);\n\n    useEffect(() => {\n        if (Len > 0) {\n            return;\n        }\n        loadCourseLesson(0);\n    }, []);\n\n    return (\n        <BScroll\n            pullUp={() => loadCourseLesson(offset)}\n            pullDown={() => reloadCourseLesson(offset)}\n        >\n            <div className=\"contentLesson\">\n                <StudyPath />\n                <CourseDirection />\n                <AllCourses courseLessonDataSource={courseLessonDataSource} />\n            </div>\n        </BScroll>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        courseLessonDataSource: state.getIn(['courseLessonDataSource']).toJS(),\n    };\n};\nconst mapDispatchToProps = (\n    dispatch: Dispatch<AddDataToCourseLessonAction | RefreshCourseLessonAction>\n) => {\n    return {\n        addDataToCourseLesson: (payload: Array<CourseLessonItem>) => {\n            dispatch(addDataToCourseLessonActionCreator(payload));\n        },\n        refreshCourseLesson: (payload: Array<CourseLessonItem>) => {\n            dispatch(refreshCourseLessonActionCreator(payload));\n        },\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Lesson);\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { FC, useRef, useEffect } from 'react';\nimport classnames from 'classnames';\nimport './myButton.styl';\n\ninterface Props {\n    myOnClick?: (...args: any[]) => void;\n    clickable: boolean;\n}\nconst MyButton: FC<Props> = (props) => {\n    const { myOnClick, clickable } = props;\n\n    const ref = useRef();\n\n    useEffect(() => {\n        //找到父元素并且把父元素的position设置为relative，让button能够吸附在右下角\n        let parentNode: ParentNode = (ref.current as HTMLElement).parentNode;\n        (parentNode as HTMLDivElement).style.position = 'relative';\n    }, []);\n\n    let finalClassName: string = classnames(\n        { myButton: true },\n        { clickable: clickable }\n    );\n\n    let finalOnClick: (...args: any[]) => void | null = null;\n\n    if (myOnClick && clickable) {\n        finalOnClick = function (...args: any[]) {\n            myOnClick.call(this, ...args);\n        };\n    }\n\n    return (\n        <button className={finalClassName} onClick={finalOnClick} ref={ref}>\n            {props.children}\n        </button>\n    );\n};\n\nexport default MyButton;\n"],"sourceRoot":""}